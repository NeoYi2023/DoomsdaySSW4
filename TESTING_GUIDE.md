# 测试指南

## 编译检查

### 1. 打开Unity编辑器
- 等待Unity完成项目导入和脚本编译
- 查看Console窗口（`Window > General > Console`）

### 2. 检查编译错误
应该没有编译错误。如果有，常见错误和解决方法：

#### 错误：找不到TMPro命名空间
```
错误信息：The type or namespace name 'TMPro' could not be found
解决方法：安装TextMeshPro包
  - Window > TextMeshPro > Import TMP Essential Resources
```

#### 错误：找不到Resources资源
```
错误信息：Resources.Load failed
解决方法：检查文件路径
  - 确保Resources文件夹在Assets根目录
  - 确保Localization文件夹名称大小写正确
  - 确保JSON文件存在且格式正确
```

#### 错误：单例未初始化
```
错误信息：NullReferenceException: Object reference not set to an instance
解决方法：
  - 确保场景中有GameInitializer对象
  - 检查GameInitializer.cs中的RuntimeInitializeOnLoadMethod
```

### 3. 检查警告
一些警告是正常的，但需要注意：
- 如果SettingsScreen组件的UI引用显示为None，需要手动连接

## 功能测试

### 测试1：分辨率设置

#### 测试步骤：
1. 运行游戏（点击Play按钮）
2. 在Game视图中找到设置界面
3. 测试预设分辨率：
   - 点击Resolution Dropdown
   - 选择一个分辨率（如1920x1080）
   - 点击Apply按钮
   - 验证游戏窗口分辨率是否改变
4. 测试自定义分辨率：
   - 选择Resolution Mode为"自定义"
   - 输入宽度和高度（如1600x900）
   - 点击Apply按钮
   - 验证分辨率是否改变
5. 测试全屏模式：
   - 切换Fullscreen Toggle
   - 点击Apply按钮
   - 验证全屏模式是否切换

#### 预期结果：
- 分辨率可以正常切换
- 全屏模式可以正常切换
- 设置会保存，重启游戏后仍然有效

### 测试2：语言设置

#### 测试步骤：
1. 运行游戏
2. 在设置界面找到Language Dropdown
3. 切换语言：
   - 选择"简体中文"
   - 验证UI文本是否更新为中文
   - 选择"English"
   - 验证UI文本是否更新为英文
   - 选择"繁体中文"
   - 验证UI文本是否更新为繁体中文
4. 检查所有使用LocalizedText组件的文本是否都更新了

#### 预期结果：
- 语言可以正常切换
- 所有UI文本都正确更新
- 语言设置会保存

### 测试3：设置持久化

#### 测试步骤：
1. 设置一个分辨率（如1280x720）
2. 设置全屏模式为窗口模式
3. 设置语言为英文
4. 点击Apply按钮
5. 停止游戏（点击Play按钮）
6. 重新运行游戏
7. 检查设置是否保持

#### 预期结果：
- 分辨率设置保持
- 全屏模式设置保持
- 语言设置保持

### 测试4：错误处理

#### 测试步骤：
1. 测试无效分辨率：
   - 在自定义模式下输入无效分辨率（如0x0或9999x9999）
   - 点击Apply按钮
   - 验证是否有错误提示或设置被拒绝
2. 测试语言资源缺失：
   - 临时重命名一个语言资源文件
   - 尝试切换到该语言
   - 验证是否有错误处理

#### 预期结果：
- 无效输入被拒绝
- 错误情况有适当的处理
- 不会导致游戏崩溃

## 性能测试

### 测试1：分辨率切换性能
- 快速切换多个分辨率
- 检查是否有卡顿或延迟
- 验证切换是否流畅

### 测试2：语言切换性能
- 快速切换多个语言
- 检查UI更新是否及时
- 验证是否有性能问题

## 集成测试

### 测试场景：完整设置流程
1. 启动游戏
2. 打开设置界面
3. 修改分辨率
4. 修改全屏模式
5. 修改语言
6. 应用所有设置
7. 验证所有设置都生效
8. 重启游戏
9. 验证设置都保持

## 问题报告模板

如果发现问题，请记录以下信息：

```
问题描述：
[描述问题]

重现步骤：
1. [步骤1]
2. [步骤2]
3. [步骤3]

预期结果：
[应该发生什么]

实际结果：
[实际发生了什么]

Unity版本：
[Unity版本号]

操作系统：
[操作系统版本]

附加信息：
[其他相关信息]
```

## 测试检查清单

- [ ] 编译无错误
- [ ] 编译无警告（或只有可接受的警告）
- [ ] 分辨率预设选项正常显示
- [ ] 分辨率可以切换
- [ ] 自定义分辨率可以输入和应用
- [ ] 全屏模式可以切换
- [ ] 语言选项正常显示
- [ ] 语言可以切换
- [ ] UI文本正确更新
- [ ] 设置可以保存
- [ ] 设置可以加载
- [ ] 无效输入被正确处理
- [ ] 无性能问题
- [ ] 无崩溃或异常
